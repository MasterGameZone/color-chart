<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Color Pattern Game</title>
  <style>
    body { font-family: 'Arial', sans-serif; background-color: #111; color: white; text-align: center; margin: 0; padding: 0; height: 90vh; }
    h1, h2 { margin-top: 30px; }
    .hidden { display: none; }
    .btn { padding: 10px 20px; margin: 10px; font-size: 18px; cursor: pointer; border: none; border-radius: 10px; display: block; margin: 10px auto; width: 200px;}
    #home, #howToPlay, #levelSelect, #game, #gameOver { padding: 20px; }
    .color-buttons { display: grid; grid-gap: 15px; justify-content: center; margin-top: 30px; }
    .color { width: 100px; height: 100px; border-radius: 20px; opacity: 0.85; cursor: pointer; transition: 0.2s; }
    .active { opacity: 1 !important; box-shadow: 0 0 20px white; transform: scale(1.1); }
    .clicked { box-shadow: 0 0 10px white; transform: scale(0.95); }
    .red { background-color: red; } .green { background-color: green; } .blue { background-color: blue; }
    .yellow { background-color: gold; } .purple { background-color: purple; } .cyan { background-color: cyan; }
    .orange { background-color: orange; } .pink { background-color: pink; } .lime { background-color: lime; }
    .magenta { background-color: magenta; } .brown { background-color: brown; } .teal { background-color: teal; }
    #status { margin-top: 20px; font-size: 20px; }
    #ad-overlay { height: 290px; width: 300px; position: absolute; background-color: white; margin: auto; display: none; transform: translate(-50%, -50%); top: 25%; left: 50%; }
    #close-start-btn { position: absolute; right: 0; top: 0; }
    #ad-overlay p { color: #000; font-size: 13px; position: absolute; bottom: -16px; left: 0; padding: 5px; }
  </style>
</head>
<body>
  <div id="home">
    <h1>üéÆ Color Pattern</h1>
    <button class="btn" onclick="showPage('levelSelect')">Level</button>
    <button class="btn" onclick="startGame()">Start Game</button>
    <button class="btn" onclick="showPage('howToPlay')">How to Play</button>
  </div>

  <div id="levelSelect" class="hidden">
    <h2>Select Difficulty</h2>
    <button class="btn" onclick="setDifficulty(2,3)">Easy (2√ó3)</button>
    <button class="btn" onclick="setDifficulty(3,3)">Medium (3√ó3)</button>
    <button class="btn" onclick="setDifficulty(4,3)">Hard (4√ó3)</button>
    <button class="btn" onclick="showPage('home')">‚¨Ö Back</button>
  </div>

  <div id="howToPlay" class="hidden">
    <h2>How to Play</h2>
    <p>Watch the color pattern carefully.<br/>Repeat the pattern by clicking.<br/>Each round adds new pattern.<br/>Mistake = Game Over!</p>
    <button class="btn" onclick="showPage('home')">‚¨Ö Back</button>
  </div>

  <div id="game" class="hidden">
    <h2>Memorize the Pattern</h2>
    <div class="color-buttons" id="buttonsContainer"></div>
    <div id="status">Click a color to begin...</div>
  </div>

  <div id="gameOver" class="hidden">
    <h2>‚ùå Game Over!</h2>
    <p>Oops! Wrong color. Try again?</p>
    <button class="btn" onclick="restartGame()">üîÅ Restart</button>
    <button class="btn" onclick="showPage('home')">‚¨Ö Back to Home</button>
  </div>

  <div id="ad-overlay">
    <button id="close-start-btn">X</button>
    <p>Visiting this small ad helps us grow. Thanks! üíñ</p>
    <script type="text/javascript">atOptions={key:'d1ab09c01ab2e203e3236993dd511f73',format:'iframe',height:250,width:300,params:{}};</script>
    <script src="//www.highperformanceformat.com/d1ab09c01ab2e203e3236993dd511f73/invoke.js"></script>
  </div>

  <script>
    const adoverlay = document.getElementById('ad-overlay');
    const closeBtn = document.getElementById('close-start-btn');
    const fullColors = ['red','green','blue','yellow','purple','cyan','orange','pink','lime','magenta','brown','teal'];
    let colors = [];
    let cols = 3, rows = 2;
    let gamePattern = [], userPattern = [], level = 0, acceptingInput = false;

    function showPage(id) {
      ['home','levelSelect','howToPlay','game','gameOver'].forEach(i=>document.getElementById(i).classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
    }

    function setDifficulty(c, r) {
      cols = c; rows = r; // update grid dims
      // update CSS grid
      const container = document.getElementById('buttonsContainer');
      container.style.gridTemplateColumns = `repeat(${cols}, 100px)`;
      container.style.gridAutoRows = `100px`;
      // generate color list for this difficulty
      colors = fullColors.slice(0, cols*rows);
      // build buttons
      container.innerHTML = '';
      colors.forEach(color=>{
        const d = document.createElement('div');
        d.id = color; d.className = `color ${color}`;
        d.onclick = ()=>handleUserClick(color);
        container.appendChild(d);
      });
      showPage('home');
    }

    function startGame() {
      showPage('game'); gamePattern=[]; userPattern=[]; level=0;
      // ensure default difficulty buttons exist
      if (!colors.length) setDifficulty(cols, rows);
      nextSequence();
    }
    function restartGame() { adoverlay.style.display='block'; }
    function realStartGame() { adoverlay.style.display='none'; startGame(); }
    closeBtn.addEventListener('click', realStartGame);

    function nextSequence() {
      userPattern=[]; level++;
      document.getElementById('status').innerText = `Level ${level}`;
      // generate new pattern of length = level
      gamePattern = Array.from({length:level},()=>colors[Math.floor(Math.random()*colors.length)]);
      let i=0; acceptingInput=false;
      const interval = setInterval(()=>{
        flashColor(gamePattern[i]); i++;
        if(i>=gamePattern.length){ clearInterval(interval); acceptingInput=true; }
      },600);
    }
    function flashColor(color) { const btn=document.getElementById(color); btn.classList.add('active'); setTimeout(()=>btn.classList.remove('active'),300); }
    function handleUserClick(color) {
      if(!acceptingInput) return;
      userPattern.push(color);
      const btn=document.getElementById(color); btn.classList.add('clicked'); setTimeout(()=>btn.classList.remove('clicked'),150);
      const idx=userPattern.length-1;
      if(userPattern[idx]!==gamePattern[idx]) return showPage('gameOver');
      if(userPattern.length===gamePattern.length) setTimeout(nextSequence,1000);
    }
  </script>
  <script src='//pl26425118.profitableratecpm.com/aa/1e/9f/aa1e9fb07fa2424a957a2ffc6cf38ef6.js'></script>
</body>
</html>
